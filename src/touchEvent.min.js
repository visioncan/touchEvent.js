var touchEvent=function(a,b){var c=this.hasTouch="ontouchstart"in window,d=this.EVENT={RESIZE:"onorientationchange"in window?"orientationchange":"resize",TOUCH_START:c?"touchstart":"mousedown",TOUCH_MOVE:c?"touchmove":"mousemove",GESTURE_START:"gesturestart",GESTURE_END:"gestureend",GESTURE_CHANGE:"gesturechange"};this.options={min_dist:20,is_deliver_on_end:!1};for(var e in b)this.options[e]=b[e];this.methods={onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeUp:function(){},onSwipeDown:function(){},onGestureEnd:function(){},onPinchOpen:function(a){},onPinchClose:function(a){},onRotated:function(a){},onGesture:function(a){},onScreenChange:function(a){}},this.wrapper=typeof a=="string"?document.querySelector(a):a,this.wrapper.addEventListener(d.TOUCH_START,this,!1),this.wrapper.addEventListener(d.GESTURE_START,this,!1),this.wrapper.addEventListener(d.GESTURE_END,this,!1),this.wrapper.addEventListener(d.GESTURE_CHANGE,this,!1),window.addEventListener(d.RESIZE,this,!1)};touchEvent.prototype={isGesture:!1,isMoving:!1,onPinchOpen:function(a){typeof a=="function"?this.methods.onPinchOpen=a:this.methods.onPinchOpen(a)},onPinchClose:function(a){typeof a=="function"?this.methods.onPinchClose=a:this.methods.onPinchClose(a)},onRotated:function(a){typeof a=="function"?this.methods.onRotated=a:this.methods.onRotated(a)},onGesture:function(a){typeof a=="function"?this.methods.onGesture=a:this.methods.onGesture(a)},onGestureEnd:function(a){typeof a=="function"?this.methods.onGestureEnd=a:this.methods.onGestureEnd()},onSwipeLeft:function(a){typeof a=="function"?this.methods.onSwipeLeft=a:this.methods.onSwipeLeft()},onSwipeRight:function(a){typeof a=="function"?this.methods.onSwipeRight=a:this.methods.onSwipeRight()},onSwipeUp:function(a){typeof a=="function"?this.methods.onSwipeUp=a:this.methods.onSwipeUp()},onSwipeDown:function(a){typeof a=="function"?this.methods.onSwipeDown=a:this.methods.onSwipeDown()},onScreenChange:function(a){typeof a=="function"?this.methods.onScreenChange=a:this.methods.onScreenChange(a)},remove:function(){this.wrapper.removeEventListener(this.EVENT.TOUCH_START,this,!1),this.wrapper.removeEventListener(this.EVENT.GESTURE_START,this,!1),this.wrapper.removeEventListener(this.EVENT.GESTURE_END,this,!1),this.wrapper.removeEventListener(this.EVENT.GESTURE_CHANGE,this,!1),window.removeEventListener(this.EVENT.RESIZE,this,!1);for(var a in this.methods)this.methods[a]=function(){}},handleEvent:function(a){switch(a.type){case this.EVENT.TOUCH_START:this._onTouchStart(a);break;case this.EVENT.TOUCH_MOVE:this._onTouchMove(a);break;case this.EVENT.GESTURE_START:this._onGestureStart(a);break;case this.EVENT.GESTURE_END:this._onGestureEnd(a);break;case this.EVENT.GESTURE_CHANGE:this._onGestureChange(a);break;case this.EVENT.RESIZE:this._onRezise(a)}},_onTouchStart:function(a){var b=this.hasTouch?a.touches[0]:a;this.startX=b.pageX,this.startY=b.pageY,this.isMoving=!0,this.wrapper.addEventListener(this.EVENT.TOUCH_MOVE,this,!1)},_onTouchMove:function(a){a.preventDefault();if(this.isGesture){this._onTouchEnd();return}var b=this.hasTouch?a.touches[0]:a;if(this.isMoving){var c=b.pageX,d=b.pageY,e=this.startX-c,f=this.startY-d;Math.abs(e)>=this.options.min_dist&&(this._onTouchEnd(),e>0?this.onSwipeLeft():this.onSwipeRight()),Math.abs(f)>=this.options.min_dist&&(this._onTouchEnd(),f>0?this.onSwipeUp():this.onSwipeDown())}},_onTouchEnd:function(){this.wrapper.removeEventListener(this.EVENT.TOUCH_MOVE,this,!1),this.startX=null,this.startY=null,this.isMoving=!1},_onGestureStart:function(a){this.isGesture=!0},_onGestureChange:function(a){a.preventDefault();if(this.options.is_deliver_on_end)return;if(a.rotation<10||a.rotation>-10)this.onRotated(a.rotation),this.onGesture(a);a.scale>1&&this.onPinchOpen(a.scale),a.scale<1&&this.onPinchClose(a.scale)},_onGestureEnd:function(a){this.isGesture=!1,a.preventDefault(),this.onGestureEnd();if(!this.options.is_deliver_on_end)return;if(a.rotation<10||a.rotation>-10)this.onRotated(a.rotation),this.onGesture(a);a.scale>1&&this.onPinchOpen(a.scale),a.scale<1&&this.onPinchClose(a.scale)},_onRezise:function(a){var b={orientation:0,width:0,height:0};this.EVENT.RESIZE=="orientationchange"&&(b.orientation=window.orientation),b.width=this.wrapper.clientWidth,b.height=this.wrapper.clientHeight,this.onScreenChange(b)}}